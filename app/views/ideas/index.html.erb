<%= render "shared/header" %>

<div class="mv">
  <h2>自分の知識を<br>共有しよう！</h2>
</div>
<div class="ideas-main">
  <% if @ranks.length > 0 %>
    <section class="lists">
      <div class="list-inner">
        <h2 class="list-ttl">
        ランキング
        </h2>
        <div class="list-card-wapper">
            <% @ranks.first(3).each.with_index(1) do |rank, i| %>
              <article class="list-card">
              <%= "第#{i}位"%>
              <%= link_to (idea_path(rank.id)), class:"no-underline" do %>
                <% if rank.image.attached? %>
                  <%= image_tag rank.image, class: "list-pict" %>
                <% else %>
                  <%= image_tag "l_e_others_501.png", class:"list-pict" %>
                <% end %>
                  <span class="writers">投稿者 </span><%= link_to rank.user.nickname, "/users/#{current_user.id}", class:"writer" %>
                  <div class="card-info">
                    <%= rank.title %>
                  </div>
              <% end %>
              </article>
            <% end %>
        </div>
        <%= link_to "全て表示する", rank_ideas_path, class:"btn btn-info" %>
      </div>
    </section>
  <% else %>
    <section>
      <div class="list-inner">
        <h2 class="list-ttl">
        ランキング
        </h2>
        <div class="list-card-wapper">
          <% 3.times do |i| %>
            <article class="list-card">
              <%= image_tag "IMG_1170.jpeg", class:"list-pict" %>
              <div class="card-info">
                <h3>題名</h3>
              </div>
            </article>
          <% end %>
        </div>
      </div>
    </section>
  <% end %>

  <% if @novelties.length > 0 %>
    <section class="lists">
      <div class="list-inner">
        <h2 class="list-ttl">
        新着
        </h2>
        <div class="list-card-wapper">
          <% @novelties.first(3).each do |novelty| %>
            <article class="list-card">
            <%= link_to (idea_path(novelty.id)), class:"no-underline" do %>
              <% if novelty.image.attached? %>
                <%= image_tag novelty.image, class: "list-pict" %>
              <% else %>
                <%= image_tag "l_e_others_501.png", class:"list-pict" %>
              <% end %>
              <span class="writers">投稿者 </span><%= link_to novelty.user.nickname, "/users/#{current_user.id}", class:"writer" %>
              <div class="card-info">
                <%= novelty.title %>
              </div>
            <% end %>
            </article>
          <% end %>
        </div>
        <%= link_to "全て表示する", novelty_ideas_path, class:"btn btn-info" %>
      </div>
    </section>
  <% else %>
    <section>
      <div class="list-inner">
        <h2 class="list-ttl">
        新着
        </h2>
        <div class="list-card-wapper">
          <% 3.times do |i| %>
            <article class="list-card">
              <%= image_tag "IMG_1170.jpeg", class:"list-pict" %>
              <div class="card-info">
                <h3>題名</h3>
              </div>
            </article>
          <% end %>
        </div>
      </div>
    </section>
  <% end %>
</div>
<%= render "shared/footer" %>